<%- include("../partials/head") %>
<body>
  <%- include("../partials/navbar") %>
  <div class="container">
    <h1 class="page-title">Carrito de Compras</h1>
    <% if (response.status === 200) { %>
      <div class="cart-list">
        <% response.payload.products.forEach((product) => { %>
          <div class="product-card">
            <img class="product-image" src="<%= product.productId.thumbnail %>" alt="<%= product.productId.title %>">
            <div class="product-details">
              <h2 class="product-title"><%= product.productId.title %></h2>
              <p class="product-description"><%= product.productId.description %></p>
              <p class="product-price">$<%= product.productId.price %></p>
            </div>
            <div class="product-actions">
              <div class="quantity-input">
                <input type="number" value="<%= product.quantity %>" min="1" step="1" data-product-id="<%= product._id %>">
              </div>
              <button class="updateBtn" data-product-id="<%= product._id %>" onclick="updateQuantity('<%= product._id %>')">Update</button>
              <button class="deleteBtn" data-product-id="<%= product._id %>" onclick="deleteProduct('<%= product._id %>')"><span>X</span></button>
            </div>
          </div>
        <% }); %>
      </div>
      <div class="total-container">
        <p class="subtotal">Subtotal: $<%= response.payload.total %></p>
        <p class="total">Total: $<%= response.payload.total %></p>
      </div>
      <div class="checkout-button-container">
        <button class="checkout-button" onclick="checkout()">Finalizar Compra</button>
      </div>
    <% } else { %>
      <p>No products in the cart.</p>
    <% } %>
  </div>
  <%- include("../partials/footer") %>
</body>
</html>
